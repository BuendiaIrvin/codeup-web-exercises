<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<body>
<h1>Goodday Weather App!</h1>
<!--<div id='map' style='width: 600px; height: 600px;'></div>-->
<div id="weather"></div>


<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/keys.js"></script>
<script>
    var coordinates = [29.4241, -98.4936];
    $.get("https://api.openweathermap.org/data/2.5/onecall?units=imperial&lat=" + coordinates[0] + "&lon=" + coordinates[1] + "&exclude=current,hourly,minutely&appid=" + WEATHER_MAP_TOKEN)
        .done(function (resp) {
            console.log(resp);
            var today = resp.daily[0];
            var todayDate = new Date(today.dt * 1000);
            var tomorrow = resp.daily[1];
            var tomorrowDate = new Date(tomorrow.dt * 1000);
            var afterT = resp.daily[2];
            var afterTomorrow = new Date(afterT.dt * 1000);
            console.log(todayDate);

            function dayWeather() {
                $.get("https://api.openweathermap.org/data/2.5/onecall", {
                    APPID: WEATHER_MAP_TOKEN,
                    lat: 29.423017,
                    lon: -98.48527,
                    units: "imperial"
                }).done(function (data) {
                    console.log('current weather', data);
                    console.log(data);
                    // for (var i = 0; i < data.daily.length; i++) {
                        var htmlStr = "<div id='weather'>";
                        htmlStr += '<p>' + todayDate + '</p>';
                        htmlStr += '<p>' + data.current.weather[0].main + '</p>';
                        htmlStr += '<p>' + data.current.temp + '</p>';
                        htmlStr += '<p>' + data.current.feels_like + '</p>';
                        htmlStr += '<p>' + data.current.wind_speed + '</p>';
                    htmlStr += '<p>' + tomorrowDate + '</p>';
                        htmlStr += '<p>' + data.daily[1].weather[0].main + '</p>';
                        htmlStr += '<p>' + data.daily[1].temp.day + '</p>';
                        htmlStr += '<p>' + data.daily[1].feels_like.day + '</p>';
                        htmlStr += '<p>' + data.daily[1].wind_speed + '</p>';
                    htmlStr += '<p>' + afterTomorrow + '</p>';
                        htmlStr += '<p>' + data.daily[2].weather[0].main + '</p>';
                        htmlStr += '<p>' + data.daily[2].temp.day + '</p>';
                        htmlStr += '<p>' + data.daily[2].feels_like.day + '</p>';
                        htmlStr += '<p>' + data.daily[2].wind_speed + '</p>';
                        htmlStr += '</div>';
                    $('#weather').append(htmlStr)
                    // }
                });
            }

            dayWeather();
        });
            // for (var i = 0; i < data.daily.length; i++) {
            //     var htmlStr = "<div id='weather" + (i + 1) + "'>";
            //     htmlStr += '<p>' + data.daily[1].weather[0].main + '</p>';
            //     htmlStr += '<p>' + data.daily[1].temp.day + '</p>';
            //     htmlStr += '<p>' + data.daily[1].feels_like.day + '</p>';
            //     htmlStr += '<p>' + data.daily[1].wind_speed + '</p>';
            //     htmlStr += '</div>';
            //     $('#weather').append(htmlStr)
            // }
            // dayWeather();
            //

    //
    // mapboxgl.accessToken = MAPBOX_ACCESS_TOKEN;
    // var map = new mapboxgl.Map({
    //     container: 'map',
    // });
    // map.setStyle('mapbox://styles/mapbox/satellite-streets-v11')
    // map.setZoom(10)
    // map.setCenter([-98.4936, 29.4241])

</script>
</body>
</html>